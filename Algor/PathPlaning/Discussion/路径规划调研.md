# 路径规划基本概念
* 定义：为可移动的对象从起始点到目标点找出一条符合约束条件路径的过程，分为全局规划和局部规划。
* 定义：在具有障碍物的环境中,按照一定的评价标准,寻找一条从起始状态到目标状态的无碰撞路径.
* 全局规划：在静态的情况下根据已有信息进行从起始点到目标点的全部路径规划。
* 局部规划：在运动过程中，根据临时遇到的的障碍物或者突发情况来确定短期的运动，避开障碍之后，继续进行跟踪全局路径。
* TSP区别：路径规划一般来说能够提取出启发函数，而旅行商问题到目标的距离并不能够进行估计，但是前面的距离是可以估计的。
* 应用：路径规划可以应用在机器人导航，无人驾驶，地图导航上，电子游戏。其中的算法可能也可以应用在组合优化、运筹学。
# 路径规划的难点
* 规划问题维度较高
* 无法兼顾实时性与最优性
* 评价指标：
    * 完备性(有限时间内能够找到问题的解(规划时间短))
    * 最优性(利用该算法找到解的最优性(路径短、能量少))
# 路径规划算法
## 图搜索算法
图搜索算法是基于图论的，为了找到图中点与点之间的最短路径的一大类算法。主要分为多源和单源算法。
### 多源
* Floyd算法：得到图中任意点到点的最短路径
### 单源
* 广度搜索：从起始节点开始每一层级进行遍历，到达目标之后选出最短路径(需要无权图，或者点与点之间的距离相等)
* 深度搜索：从起始节点开始按照深度遍历路径，然后选出最短路径,建立树结构(更为通用的一种框架，对图无特殊要求，不限制在路径规划领域)
* 下面三种是同一种类型的算法，只是在启发函数方面有所区别，三种方法的流程如下：
    1. 初始化环境和变量
    2. 当前点curNode赋值为起点,openlist、closelist为空
    3. 对周围8个点分别进行处理：
        * 如果点是障碍物、出边界或者已经在closelist里面，跳过这个点
        * 如果点已经在openlist,判断curNode是否是当前节点的父节点，进行节点g值更新
        * 如果点不在openlist里面，将curNode置为当前节点的父节点，进行节点g值更新
    4. 从周围点中选出f值最小的值作为下一个目标点
    5. 将curNode加入到closelist里面，并将下一个目标点置为当前点curNode
    6. 如果终点不在closelist里面，执行步骤2
    7. 退出程序
* 其中f(表示点的消耗) = g(已经走过的距离) + h(到目标点的估计值),通过g值来选择下一个点
* Dijstra算法：按照走过的距离进行搜索，选取离起始点最近的点进行探索，是一种广度搜索(对图无特殊要求)
* 最佳优先搜索：与上面流程一致，不过这是是选择离终点距离最近的点作为下一个探索目标，离目标的距离被称为启发函数(图需要能够估计到目标点的距离，不适用于旅行商问题)
* A*算法：上面两种方法的结合，衡量f(n) = g(n)+h(n)来选择下一个点(同样需要启发函数，不适用于旅行商问题)
## 智能优化
智能优化算法是一类启发式算法，每次得到的结果是不确定的。
### 蚁群算法
* 蚁群算法是一类模仿蚂蚁寻找最短路径的方法，也可解决TSP问题。主要思想是蚂蚁通过群体在路径上留下的信息素来选择自己的路径，路径的总长度越长，每只蚂蚁留下的信息素浓度越低，随着时间的增加，蚂蚁就会倾向于选择长度最短的道路。但是蚁群算法存在着全局调优能力不强，无法解决问题维度大的问题。蚁群算法解决路径规划问题的流程如下：
1. 初始化环境和变量
2. 进行IterMax次迭代：
    * 初始化每只蚂蚁所在起点
    * 对每只蚂蚁进行迭代
        * 根据信息素矩阵选出下一个点
        * 如果可选的点为空，未找到目标点，当前蚂蚁死亡，退出当前蚂蚁循环
        * 如果找到目标的，当前蚂蚁任务成功，保存路径，退出循环
        * 蚂蚁移动到下一个点，继续循环
    * 将成功的蚂蚁经过的路径进行信息素浓度更新
    * 对每个路径的信息素浓度进行衰减
3. 迭代结束，退出程序
* 存在问题：
    * 信息素矩阵的维度 
    * 地图较大时候无法找到，目标点
    * 寻优能力不强
    * 时间不快，可以考虑多进程
## 数学与概率
### 快速扩展RRT(不适用于旅行商问题,适合较为连续的点)
* RRT算法的特点是在已知的地图中快速找到一个可行的路径，是一种基于概率学的算法，每次得到的结果也不固定。适用于要求实时性比较高的情况。具体算法流程如下：
1. 初始化环境和参数
2. 将起始点作为根节点，加入Nodelist
3. 开始循环
    * 在图中随机选择点A(Rate0的概率选择目标点)
    * 找出Nodelist中与其距离最近的点B
    * 将B向A点延长固定长度，判断延长线是否经过障碍，如果经过障碍物，当前点无效，继续下次循环
    * 将A点保存到Nodelist，并且B点作为A点的父节点存在
    * 判断A点到目标点的距离是否小于预设阈值，如果小于，跳出循环
4. 循环结束，退出程序
* RRT算法并不适用于TSP问题，因为TSP问题中无法抽出启发项
### 遗传算法和粒子群算法
这两种方法本质上是一种优化算法，
### 随机路途法PRM(不适用于旅行商问题)
* 在规划空间内随机选取N个节点，之后连接各个节点，并去除与障碍物的连线，从而得到一个随机路途。
### 遗传算法EA
* 1 利用障碍物将整个图分成不同的区域，线是可行点连接起来，然后将可行点作为节点来优化(一种水下航行器)
* 2 利用分层模型将图分为不同区域，每个区域是一种类型，然后将同一层级的作为一个编码进行优化(智能水下机器人)
* 3 利用栅格法进行编号(基于改进遗传算法)
    * 初始化(先验知识来选点，其实就是人为选几个不在障碍物上的点)
    * 将上面的轨迹进行平滑使得连线不经过障碍物
    * 交叉，有共同点的才可以交叉，保证交叉之后的个体仍为连续值
    * 变异，检查变异的可行性
### 粒子群优化PSO
* 利用同样距离的圆进行选点规划,每一小步进行搜索(基于粒子群算法的)
### 模拟退火算法SA

* 障碍物产生排斥力，目标产生吸引力，将两个力合成，然后合力方向作为前进方向，大小作为移动速度
